{{ content }}

<script src="javascript/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" charset="utf-8">
  $(function(){
    var xOffset = 10,
        yOffset = 30;

    function photo_adhesive(td, image_url) {
      var show_photo = function(e) {
                $("body").append("<div id='preview'><img src='"+ image_url +"' alt='Foto del piloto' /></div>"); 
                $("#preview")
                  .css("top",(e.pageY - xOffset) + "px")
                  .css("left",(e.pageX + yOffset) + "px")
                  .fadeIn("fast");            
      };
      var photo_handler = function(e) {
        $.ajax({
          url:image_url,
          type:'HEAD',
          error: function(){
            td.unbind('mouseenter',photo_handler);
          },
          success: function(){
            show_photo(e);
            td.unbind('mouseenter',photo_handler);
            td.hover(show_photo,
              function(){
                $("#preview").remove();
              }
            );
            td.mousemove(function(e){
              $("#preview")
                .css("top",(e.pageY - xOffset) + "px")
                .css("left",(e.pageX + yOffset) + "px");
            });
          }
        });
      };
      td.bind('mouseenter', photo_handler);
    };

    $('.fs_res table tr td span.pilot_id').each(function(){
      var span = $(this),
          pilot_id = span.html(),
          td = span.parent('td'),
          td_glider = $(td).next('td.glider');
      photo_adhesive(td, 'images/pilots/' + pilot_id + '.jpg'); 
      photo_adhesive(td_glider, 'images/pilots/' + pilot_id + '_glider.jpg'); 
    }); 
    
  })
</script>
